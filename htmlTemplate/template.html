<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Archimedes</title>
    <!-- CSS Stylesheet -->
    <link rel="stylesheet" href="../htmlTemplate/css/root.css">
    <link rel="stylesheet" href="../htmlTemplate/css/main.css">
    <link rel="stylesheet" href="../htmlTemplate/css/sidebars.css">
    <link rel="stylesheet" href="../htmlTemplate/css/console.css">
    <link rel="stylesheet" href="../htmlTemplate/css/inventory.css">

    <link rel="stylesheet" href="../htmlTemplate/css/animations.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- JS Scripts -->
    <script src="../htmlTemplate/js/interface-functions.js"></script>
    <style>
    .powered-by-emscripten {
        display: none;
    }
    </style>
</head>
<body>
  <!-- Main App Container -->
  <div class="app-container">

    <!-- Three Column Layout -->
    <div class="main-layout">

        <!-- Left Button Bar -->
             <aside class="left-sidebar">

               <!-- Player Info Panel -->
               <div class="player-info">
                 <div class="player-avatar">
                   <i class="fas fa-user-circle"></i>
                   <span id="player-name">Player</span>
                 </div>
                 <div class="player-level">
                   <span>Level <span id="player-level">1</span></span>
                 </div>
               </div>

               <!-- Game Stats -->
               <div class="game-stats">
                 <h4>Vital Stats</h4>
                 <div class="stat-item">
                   <div class="stat-label">
                     <i class="fas fa-heart"></i>
                     <span>Health</span>
                   </div>
                   <div class="stat-bar">
                     <div class="stat-fill health-fill" style="width: 100%"></div>
                     <span class="stat-text"><span id="player-health">100</span>/100</span>
                   </div>
                 </div>
                 <div class="stat-item">
                   <div class="stat-label">
                     <i class="fas fa-running"></i>
                     <span>Stamina</span>
                   </div>
                   <div class="stat-bar">
                     <div class="stat-fill stamina-fill" style="width: 80%"></div>
                     <span class="stat-text"><span id="player-stamina">80</span>/100</span>
                   </div>
                 </div>
                 <div class="stat-item">
                   <div class="stat-label">
                     <i class="fas fa-magic"></i>
                     <span>Mana</span>
                   </div>
                   <div class="stat-bar">
                     <div class="stat-fill mana-fill" style="width: 90%"></div>
                     <span class="stat-text"><span id="player-mana">90</span>/100</span>
                   </div>
                 </div>
                 <div class="stat-item">
                   <div class="stat-label">
                     <i class="fas fa-star"></i>
                     <span>XP</span>
                   </div>
                   <div class="stat-bar">
                     <div class="stat-fill xp-fill" style="width: 45%"></div>
                     <span class="stat-text"><span id="player-xp">450</span>/1000</span>
                   </div>
                 </div>
               </div>

               <!-- Selected Object Info - will be dynamically added by JavaScript -->
             </aside>

      <!-- Center Game Area -->
      <main class="center-game-area">
        <div class="game-wrapper">
            <div class="loading-indicator loading-fade-out">Loading...</div>
          <canvas class="game-container" id="canvas">.</canvas>
        </div>
      </main>

      <!-- Right Button Bar -->
      <aside class="right-sidebar">
          <div class="sidebar-header">
            <h3>Interface</h3>
          </div>
          <div class="button-grid">
            <button class="icon-btn active" onclick="openInventory()" title="Inventory">
              <i class="fas fa-briefcase"></i>
            </button>
            <button class="icon-btn" onclick="openCharacterSheet()" title="Character Sheet">
              <i class="fas fa-user"></i>
            </button>
            <button class="icon-btn" onclick="openProgress()" title="Progress/Skills">
              <i class="fas fa-chart-bar"></i>
            </button>
            <button class="icon-btn" onclick="openMap()" title="World Map">
              <i class="fas fa-map"></i>
            </button>
            <button class="icon-btn" onclick="openQuests()" title="Quest Journal">
              <i class="fas fa-scroll"></i>
            </button>
            <button class="icon-btn" onclick="openSettings()" title="Settings">
              <i class="fas fa-cog"></i>
            </button>
          </div>

        <!-- Dynamic Content Area - will be populated by JavaScript -->
      </aside>


    </div>

    <!-- Bottom Console/Terminal -->
    <footer class="console-area">
      <div class="console-header">
      </div>
      <div class="console-content" id="console">
        <div class="console-output" id="console-output">
          <div class="console-line">Welcome to ASCII Game Console</div>
        </div>
      </div>
    </footer>

  </div>

  <!-- Module Loading Scripts -->
  <script type="module">
    import { initModuleLoader } from '../htmlTemplate/module_loader.mjs';
    window.initModuleLoader = initModuleLoader;
  </script>

  <!-- MODULE INITIALIZATION -->
  <script>
    var Module = {
      canvas: (function () {
        var canvas = document.getElementById("canvas");
        return canvas;
      })(),
      onRuntimeInitialized: function () {
        console.log("Runtime initialized!");
        updateConsole("Runtime initialized!");

        if (typeof window.initModuleLoader === "function") {
          window.initModuleLoader(Module);
        }
      },
      change_color: function (color) {
        if (typeof Module._g_ChangeColor === "function") {
          Module._g_ChangeColor(color);
        }
      },
    };
  </script>

  {{{ SCRIPT }}}

</body>
<script src="../htmlTemplate/js/animations.js"></script>
</html>
